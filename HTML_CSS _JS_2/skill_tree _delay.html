<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>



    <style>


        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body{
            font-family: Arial, Helvetica, sans-serif;
			font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: #181818;
            color: #fff;
			user-select: none;
        }


        


        #main_screen{
            /* width: 100%;
            height: 100%; */
            width: 914px;
            height: 635px;
            position: fixed;
            left: 0;
            top: 0;
        }


        #main_screen img{
            width: 100%;
            height: 100%;
        }




        .skill{
            width: 32px;
            height: 32px;
            background-color: #353535;
            border-radius: 50%;
            cursor: pointer;
            position: absolute;
            background-color: #f55;
            left: 0;
            top: 0;
        } 


        .skill_unlocked{
            background-color: #55f;
        }
        
        .skill_paid{
            background-color: #5f5;
        }


        .skill:hover{
            opacity: 0.8;
        }


    </style>


</head>



<body>

    
    


 
    <div id="main_screen">
        
        <img src="https://clan.akamai.steamstatic.com/images/40369939/fb17d8bcaa023d0befd4e7fed4ab01bd6ef38d67.png">


        <div id="content">

            <div class="skill" skill-name="speed" style="left: 88px; top: 250px;"></div>
            <div class="skill" skill-name="damage" style="left: 88px; top: 408px;"></div>

            <div class="skill skill_unlocked" skill-name="health" style="left: 164px; top: 329px;"></div>

            <div class="skill" skill-name="dragon_breath" style="left: 277px; top: 329px;"></div>
            <div class="skill" skill-name="hardened_scale" style="left: 372px; top: 329px;"></div>
            <div class="skill" skill-name="mana_increase" style="left: 483px; top: 329px;"></div>
            <div class="skill" skill-name="experience_increase" style="left: 587px; top: 329px;"></div>

            <div class="skill" skill-name="blue_flame" style="left: 212px; top: 229px;"></div>
            <div class="skill" skill-name="plasma_blast" style="left: 257px; top: 161px;"></div>
            <div class="skill" skill-name="bashing_tail" style="left: 360px; top: 238px;"></div>
            <div class="skill" skill-name="shock_tail" style="left: 360px; top: 145px;"></div>
            <div class="skill" skill-name="dodge_ability" style="left: 490px; top: 165px;"></div>
            <div class="skill" skill-name="dragon_force" style="left: 617px; top: 222px;"></div>
            <div class="skill" skill-name="fly_ability" style="left: 770px; top: 168px;"></div>

            <div class="skill" skill-name="red_flame" style="left: 212px; top: 427px;"></div>
            <div class="skill" skill-name="explosive_blast" style="left: 257px; top: 494px;"></div>
            <div class="skill" skill-name="spike_tail" style="left: 360px; top: 418px;"></div>
            <div class="skill" skill-name="fire_tail" style="left: 360px; top: 510px;"></div>
            <div class="skill" skill-name="block_ability" style="left: 490px; top: 490px;"></div>
            <div class="skill" skill-name="dragon_might" style="left: 617px; top: 433px;"></div>
            <div class="skill" skill-name="super_nova" style="left: 770px; top: 488px;"></div>
            
        </div>

    </div>

     


    <script>

        Math.clamp = (value, min, max) => {
            if (value < min) return min;
            if (value > max) return max;
            return value;
        };


        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min) + min);
        }



        var SKILL_TREE = {


            "root": {
                "node_name": "health",
                "paid": false,
                "locked": false,
                "nodes": [
                    {
                        "node_name": "speed",
                        "paid": false,
                        "locked": true
                    },



                    {
                        "node_name": "damage",
                        "paid": false,
                        "locked": true
                    },



                    {
                        "node_name": "dragon_breath",
                        "paid": false,
                        "locked": true,
                        "nodes": [
                            {
                                "node_name": "hardened_scale",
                                "paid": false,
                                "locked": true,
                                "nodes": [
                                    {
                                        "node_name": "mana_increase",
                                        "paid": false,
                                        "locked": true,
                                        "nodes": [
                                            {
                                                "node_name": "experience_increase",
                                                "paid": false,
                                                "locked": true
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },



                    {
                        "node_name": "blue_flame",
                        "paid": false,
                        "locked": true,
                        "nodes": [
                            {
                                "node_name": "plasma_blast",
                                "paid": false,
                                "locked": true
                            },
                            {
                                "node_name": "bashing_tail",
                                "paid": false,
                                "locked": true,
                                "nodes": [
                                    {
                                        "node_name": "shock_tail",
                                        "paid": false,
                                        "locked": true
                                    },
                                    {
                                        "node_name": "dodge_ability",
                                        "paid": false,
                                        "locked": true,
                                        "nodes": [
                                            {
                                                "node_name": "dragon_force",
                                                "paid": false,
                                                "locked": true,
                                                "nodes": [
                                                    {
                                                        "node_name": "fly_ability",
                                                        "paid": false,
                                                        "locked": true
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },



                    {
                        "node_name": "red_flame",
                        "paid": false,
                        "locked": true,
                        "nodes": [
                            {
                                "node_name": "explosive_blast",
                                "paid": false,
                                "locked": true
                            },
                            {
                                "node_name": "spike_tail",
                                "paid": false,
                                "locked": true,
                                "nodes": [
                                    {
                                        "node_name": "fire_tail",
                                        "paid": false,
                                        "locked": true
                                    },
                                    {
                                        "node_name": "block_ability",
                                        "paid": false,
                                        "locked": true,
                                        "nodes": [
                                            {
                                                "node_name": "dragon_might",
                                                "paid": false,
                                                "locked": true,
                                                "nodes": [
                                                    {
                                                        "node_name": "super_nova",
                                                        "paid": false,
                                                        "locked": true
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }


                ]


            }


        };



        let count = 0;

        function getNodeByName( nodeName ){

            if ( SKILL_TREE.root.node_name == nodeName ){
                return SKILL_TREE.root;
            }
 
            return getSubNodeByName(nodeName, SKILL_TREE.root.nodes);

        }
 

        function getSubNodeByName( nodeName, nodeReference ){
            
            if ( nodeReference != null ){
                
                for (let i = 0; i < nodeReference.length; i++){
                    
                    setTimeout(()=>{
                        console.log(nodeReference[i].node_name);

                        if (nodeName != nodeReference[i].node_name){
                            document.querySelector(`.skill[skill-name=${nodeReference[i].node_name}]`).style.backgroundColor = "#f0f";
                        }

                    }, 150 * count++);

                    if ( nodeName == nodeReference[i].node_name ){
                        return nodeReference[i];
                    }

                    if ( nodeReference[i].nodes != null ){ 
                        let tempNode = getSubNodeByName(nodeName, nodeReference[i].nodes);
                         
                        if ( tempNode != null ){   
                            return tempNode;
                        }
                    } 
                    
                }

            } 
                
            return null;
            
        }







        










        document.querySelectorAll(".skill").forEach(skill => {

            skill.onclick = () => {
                count = 0;
                 
                document.querySelectorAll(".skill_paid").forEach(e => e.classList.remove("skill_paid"));
                document.querySelectorAll(".skill").forEach(e => e.style.backgroundColor = '');
                    
                const node_name = skill.getAttribute("skill-name"); 
                skill.classList.add("skill_paid");


                let skillFound = getNodeByName(node_name); 

            };

        });



         

        


    </script>


</body>
</html>