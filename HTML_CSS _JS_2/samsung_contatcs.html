<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contatos</title>



    <style>


        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body{
			font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: #fafafa;
            color: #1e1e1e;
			user-select: none;
            overscroll-behavior: contain;
        }


        input{
            caret-color: #f79743;
        }






        /* MODAL */

        .modal{
            width: 100%;
            height: 100%;
            position: fixed;
            opacity: 0;
            display: none;
            transition: 200ms;
        }

        .modal_active{
            opacity: 1; 
        }

        .modal_container{
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .modal_background{
            width: 100%;
            height: 100%;
            background-color: #00000080;
            position: absolute;
            top: 0;
            left: 0;
        }


        .modal_window{
            max-width: 360px;
            width: 85%;
            padding: 16px;
            background-color: #fafafa;
            box-shadow: 0 0 5px #a2a2a2;
            border-radius: 16px;
            z-index: 1;
            display: flex;
            justify-content: space-between;
            flex-direction: column;
        }

        .modal_content{
            padding: 8px 16px;
            font-size: 1.2em;
            font-weight: 600;
            color: #252525;
        }

        .modal_actions{ 
            margin-top: 16px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            justify-items: end;
        }
    
        .modal_button{
            color: #f79743;
            font-weight: 600; 
            padding: 8px; 
        }
        .modal_button:active{
            background-color: #f3f3f3;
        }

         




        /* SCREEN */
        .screen{
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0; 
             
        }

        



        .screen_content{
            height: 100%;
            overflow: hidden auto;
        }





        /* MAIN SCREEN */ 
		
		#screen_main .screen_header{
			height: 75px;
		}
		
        .main_header_body{
            width: 100%; 
			height: 100%;
            align-items: center;
            display: none;
        }

        .main_header_body_active{
            display: flex;
        }





        /* SEARCH MODE */

        #search_exit{
            color: #f79743;
            border-radius: 50%;
            width: 0;
            transition: 200ms;
            opacity: 0;
            margin: 0 8px;
        }
        #search_exit:active{
            background-color: #e2e2e2;
        }

        #search_exit:not(.search_mode){
            margin-right: 8px;
        }

        .search_mode{
            width: 32px !important;
            opacity: 1 !important;
        }

        #search_container{
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f5f5f5;
            color: #a6a6a6;
            border: 1px solid #d8d8d8;
            margin: 8px;
            margin-left: 0;
             
            border-radius: 25px;
            overflow: hidden;
        }

        #search_wrapper{
            padding-left: 8px;
            position: relative;
            flex: 1;
        }


        .search_icon{
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        .search_icon svg:nth-child(2){
            display: none;
        }

        


        #search_placeholder{
            pointer-events: none;
            display: flex;
            align-items: center;
            position: absolute;

            visibility: hidden;
        }

        .search_placeholder_visible{
            visibility: visible !important;
        }



        #search_input{
            width: 100%;
            height: 32px;
            padding: 0 8px;
            outline: none;
            border: none;
            background-color: transparent; 
        }


        #search_button{
            padding-left: 0;
            padding-right: 4px;
            color: #757575;
            position: relative;
        }
        #search_button svg{
            display: none;
        }

        .search_icon_mode svg{
            display: block !important;
        }
        

        #search_button:active{
            background-color: #e2e2e2;
        }

        #search_button:active::before{
            background-color: #e2e2e2;
        }






        
        /* SELECT MODE */
        #checkbox_container input{
            display: none;
        }


        #checkbox_wrapper{
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
        }

        #checkbox_element{
            width: 24px;
            height: 24px;
            border-radius: 50%; 
            border: 1px solid #646464;
            padding: 3px;
            
        }
        #checkbox_element div{
            
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            top: -1px;
            color: #fff;
            display: none;
        }
        

        #checkbox_container input:checked ~ #checkbox_wrapper #checkbox_element div{
            display: flex; 
        }
        #checkbox_container input:checked ~ #checkbox_wrapper #checkbox_element{
            background-color: #f79743;
            border: 1px solid #f79743;
        }



        #checkbox_label{
            font-size: 0.8em;
        }

 
        #selected_count{
            flex: 1;
            font-size: 1.2em;
            font-weight: bold;
        }

        #selected_count,
        #delete_selected{
            padding: 8px; 
        }
        #delete_selected{
            color: #f79743;
            margin-right: 8px;
        }
        #delete_selected:active{
            background-color: #e2e2e2;
            border-radius: 5px;
        }








        /* SCREEN MAIN -- CONTENT */

        .contact_list{
            display: none;
        }

        .contact_list_active{
            display: block !important;
        }


        /* GROUP */
        .contact_sorter_group{
            padding: 4px 0;
        }

        

        /* SORTER */
        .contact_sorter_wrapper{
            display: flex;
            align-items: center;
            padding: 0 24px;
        }

        .contact_sorter_wrapper > div:last-child{
            width: 100%;
            height: 1px;
            background-color: #d4d4d4;
            margin-left: 8px;
        }



        .contact_sorter_content{
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #959595;
        }


        .contact_sorter_favorite .contact_sorter_content div:first-child{
            margin-right: 8px;
            color: #f6a41c;
        }


        /* ITEM */
        .contact_item_wrapper{
            padding: 10px 24px;
            display: flex;
            align-items: center;
        }
         

        .contact_item_image{
            width: 48px;
            height: 48px;
            border: 1px solid #cacaca;
            color: #c2c2c2;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 31px;
            font-weight: 400;
            margin-right: 24px;
            line-height: 0;
        }
         

        
        .contact_item_image > div:last-child{
            display: flex;
            color: #fff;
        }
        
        .contact_item_selected,
        .contact_item_wrapper:active{
            background-color: #f3f3f3;
        }

        .contact_item_selected .contact_item_image{
            border: 1px solid #f79743;
            background-color: #f79743;
        }
        

        

         
         
        .contact_item_selected .contact_item_image > div:first-child,
        .contact_item_wrapper:not(.contact_item_selected) .contact_item_image > div:last-child{
            display: none !important;
        }


        .contact_item_title{
            font-size: 1.2em;
            font-weight: 400;
            color: #252525;
        }
        .contact_item_subTitle{
            color: #979797;
            
        }

        .contact_item_title,
        .contact_item_subTitle{
            text-overflow: ellipsis;
            overflow: hidden;
        }






        /* ADD BUTTON */
        #addButton_wrapper{
            position: relative;
            height: 64px; 
        }
        #addButton{
            width: 64px;
            height: 64px;
            margin: 16px 48px;
            background-color: #f79743;
            transform: scale(0);
            transition: 300ms;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            position: fixed;
            right: 0;
            bottom: 0;
        }

        .addButton_visible #addButton{
            transform: scale(1) !important;
        }



        /* SCROLLTOP BUTTON */
        #scrollTopButton_wrapper{
            width: 100%;
            display: flex;
            justify-content: center;
            position: absolute;
            bottom: 0;
            padding: 16px 0;
            pointer-events: none;
            display: none;
        }

        #scrollTopButton{
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fafafa;
            color: #7d7d7d;
            box-shadow: 0 0 5px #d0d0d0;
            border-radius: 50%;
            pointer-events: auto;
        }
        #scrollTopButton:active{
            background-color: #e9e9e9;
        }

        .scrollTopButton_visible{
            display: flex !important;
        }







        /* SCROLLER LETTER */
        #scroll_wrapper{ 
            height: 100%;
            width: 24px;
            padding: 64px 0 24px;
            pointer-events: none;
            position: absolute; 
            bottom: 0; 
            right: -100%; 
            transition: 300ms;
        }

        .scrollWrapper_visible{ 
            right: 18px !important;
        }

        #scroll{
            width: 100%;
            height: 100%;
            background-color: #fafafa;
            pointer-events: auto;
            color: #c2c2c2;
            border: 1px solid #e1e1e1;
            font-weight: 400;
            font-size: 0.8em;
            border-radius: 25px;
            padding: 5px 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }


        #scroll_current_wrapper{
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            font-size: 24px;
            background-color: #f79743;
            opacity: 0.7;
            color: #fff;
            position: absolute;
            left: -70px;
            top: 0;
            align-items: center;
            justify-content: center;
            pointer-events: none; 
            display: none;
        }


        #scroll_thumb{
            width: calc(100% - 2*4px);
            height: 50px;
            background-color: #f79743;
            opacity: 0.3;
            border-radius: 50px;
            margin: 4px 4px; 
            position: absolute;
            top: 0;
            visibility: hidden;
        }

 






        /* SCREEN -- CONTACT */


        /* HEADER */

        #screen_contact .screen_header{
            background-color: #5f6f86;
            color: #fafafa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .screen_contact_exit{ 
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
             
            margin: 4px;
        }
        .screen_contact_exit:active{
            background-color: #f3f3f320;
        }



        #editButton{
            padding: 8px;
            margin-right: 8px;
            color: inherit; 
            border-radius: 5px;
            font-weight: 500;
        }

        #editButton:active{
            background-color: #f3f3f320;
        }

        /* CONTENT */
        #screen_contact{
            background-color: #fafafa;
            transition: 250ms;
            left: 100%;
            background-color: #f0f0f0;
        }



        .screen_contact_image{
            background-color: #5f6f86;
            color: #fafafa;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 150px;
            padding: 32px 0 24px;
        }
        .screen_contact_image svg{
            width: 100%;
            height: 100%;
        }

        

        .screen_contact_block_wrapper{
            margin: 8px;
            padding: 8px 24px;
            background-color: #fafafa;
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            border: 1px solid #d4d4d4;
            border-radius: 8px;
        }


        #screen_contact_name{
            flex: 1;
            font-size: 1.4em;
            color: #252525;
            font-weight: 700;
            overflow: hidden;
            margin-right: 10px;
            text-overflow: ellipsis;
        } 



        #screen_contact_favorite_label input{
            display: none;
        }
        #screen_contact_favorite{
            color: #cdcdcd;
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
        }
        #screen_contact_favorite:active{
            background-color: #f3f3f3;
        }
        #screen_contact_favorite_label input:checked ~ #screen_contact_favorite{
            color: #f8a415;
        }






        /* ITEM  */
        .screen_contact_block_item{
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
        }

        .screen_contact_block_item_content{
            text-align: left;
            font-weight: 600;
        }
        .screen_contact_block_item_title{
            color: #737373;
        }
        .screen_contact_block_item_subTitle{
            color: #252525;
            font-size: 1.2em;
        }

        .screen_contact_block_item_actions{
            display: flex;
        }

        .screen_contact_block_item_action{
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            border-radius: 8px;
        }

        .screen_contact_block_item_action:active{
            background-color: #e6e6e6;
        }

        #action_caller{
            color: #79b464;
        }

        #action_message{
            color: #63abc4;
        }










        /* SCREEN -- ADD/EDIT CONTACT */
        #screen_addEdit{
            transition: 200ms;
            background-color: #fafafa;
            left: 100%;
            
        }
        #screen_addEdit .screen_header{
            height: 50px;
            border-bottom: 1px solid #d4d4d4;
            background-color: #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #screen_addEdit .screen_header div{
            height: 100%;
            flex: 1;
            text-align: center; 
            font-weight: 600;
            color: #f79743;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #screen_addEdit .screen_header div:active{
            background-color: #f3f3f3;
        }




        /* CONTENT */
        
        #screen_addEdit .screen_content{
            width: 100%;
            display: flex;
            align-items: center;
            flex-direction: column;
        }

        #addEdit_image{
            color: #a9a9a9;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px 0;
        }




        /* INPUT */

        .addEdit_input{
            margin: 8px;
            width: calc(100% - 32px*2);
            border: 0;
            color: #353535;
            border-bottom: 1px solid #8e8e8e;
            transition: 200ms;
            background-color: transparent;
            outline: none;
            padding: 8px 0;
            font-weight: 600;
            font-size: 1em;
        }

        .addEdit_input:focus{
            border-bottom: 1px solid #f79743;
        }



 
        #toastWrapper{
            width: 100%;
            padding: 16px;
            text-align: center;
            pointer-events: none;
            opacity: 0;
            transition: 200ms;
            position: fixed;
            bottom: 0;
        }

        #toast_content{
            padding: 16px 24px 12px 24px;
            border-radius: 50px;
            color: #fafafa;
            background-color: #252525b3;
            box-shadow: 0 0 5px #a2a2a2;
            font-size: 1em;
        }


        .toast_visible{
            opacity: 1 !important;
        }


 
        


    </style>


</head>



<body>

    
    

    <!--
    <div class="screen_header"></div>
    <div class="screen_content"></div>
    <div class="screen_footer"></div>
    -->

    <div class="screen" id="screen_main">

        <div class="screen_header">

            <!-- HEADER -- SEARCH MODE -- class - main_header_body_active -->
            <div class="main_header_body main_header_body_active" id="header_mode_search">

                <!-- EXIT SEARCH -- class - search_mode -->
                <div class="search_icon" id="search_exit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                    </svg>
                </div>


                <!-- SEARCH BAR -->
                <div id="search_container">

                    <div id="search_wrapper">
                        <div id="search_placeholder" class="search_placeholder_visible">
                            
                            <div class="search_icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                </svg>
                            </div>
                            <div>Procurar contatos</div>
                        </div>

                        <input type="text" spellcheck="false" id="search_input">
                    </div>


                    <!-- OPTION/CLEAR -- class - search_icon_mode -->
                    <div class="search_icon" id="search_button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                        </svg>
                    </div>
                    
                    
                </div>

            </div>


            <!-- HEADER -- SELECT MODE -->
            <div class="main_header_body " id="header_modo_select" style="border-bottom: 1px solid #d4d4d4;">

                <!-- CHECK ALL -->
                <label id="checkbox_container">

                    <input type="checkbox" id="checkbox_header_input">

                    <div id="checkbox_wrapper">

                        <div id="checkbox_element">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
                                </svg>
                            </div>
                        </div>

                        <div id="checkbox_label">Todos</div>
                    </div>

                </label>


                <!-- CURRENT SELECTED COUNT -->
                <div id="selected_count">1</div>


                <!-- DELETE BUTTON -->
                <div id="delete_selected">APAGAR</div>


            </div>

        </div>


        <!-- O ITEM [contact_item_wrapper] tem [contact_item_selected] pra selecionar -->
        <div class="screen_content">
            

            <!-- MAIN LIST -->
            <div class="contact_list contact_list_active" id="contact_list_main">


                <!-- SORTER -->
                <div class="contact_sorter_group">

                    <!-- LETTE SORTER -->
                    <div class="contact_sorter_wrapper">
                        <div class="contact_sorter_content"><div>A</div></div>
                        <div></div>
                    </div>

                    <!-- LIST -->
                    <div class="contact_sorter_list">

                        <!-- ITEM -->
                        <div class="contact_item_wrapper">

                            <!-- IMAGE/SELECTED -->
                            <div class="contact_item_image">
                                <div>A</div>
                                <div><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/></svg></div>
                            </div>
                            
                            <!-- CONTENT -->
                            <div class="contact_item_content">
                                <div class="contact_item_title">Alexandre</div>
                            </div>


                        </div>

                    </div>

                </div>


            </div>
            

 
            <!-- BY SEARCH LIST -->
            <div class="contact_list" id="contact_list_search">


                <!-- ITEM -->
                <div class="contact_item_wrapper">

                    <!-- IMAGE/SELECTED -->
                    <div class="contact_item_image">
                        <div>A</div>
                        <div><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/></svg></div>
                    </div>
                    
                    <!-- CONTENT -->
                    <div class="contact_item_content">
                        <div class="contact_item_title">Alexandre</div>
                        <div class="contact_item_subTitle">55 0091234-5678</div>
                    </div>

                </div>

            </div>



            <!-- ADD BUTTON -- class - addButton_visible -->
            <div id="addButton_wrapper" class="addButton_visible">
                <div id="addButton" onclick="openAddEditScreen()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"/>
                    </svg>
                </div>
            </div>

            <!-- SCROLLTOP BUTTON -- class - scrollTopButton_visible -->
            <div id="scrollTopButton_wrapper">
                <div id="scrollTopButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 0 0 .708 0L8 8.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708zM2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 0 0 0-.8H2.8a.4.4 0 0 0-.4.4z"/>
                    </svg>
                </div>
            </div>



            <!-- SCROLLER LETTER -- class - scrollWrapper_visible -->
            <div id="scroll_wrapper" class="scrollWrapper_visible">

                <div id="scroll">

                    <div id="scroll_current_wrapper">X</div>

                    <div id="scroll_thumb"></div>

                    <div class="scroll_item">&star;</div>
                    <div class="scroll_item">&</div> 
                    <div class="scroll_item">A</div>
                    <div class="scroll_item">B</div>
                    <div class="scroll_item">C</div> 
                    <div class="scroll_item">D</div> 
                    <div class="scroll_item">E</div>
                    <div class="scroll_item">F</div>
                    <div class="scroll_item">G</div>
                    <div class="scroll_item">H</div> 
                    <div class="scroll_item">I</div> 
                    <div class="scroll_item">J</div>
                    <div class="scroll_item">K</div>
                    <div class="scroll_item">L</div>
                    <div class="scroll_item">M</div> 
                    <div class="scroll_item">N</div> 
                    <div class="scroll_item">O</div>
                    <div class="scroll_item">P</div>
                    <div class="scroll_item">Q</div>
                    <div class="scroll_item">R</div> 
                    <div class="scroll_item">S</div> 
                    <div class="scroll_item">T</div>
                    <div class="scroll_item">U</div>
                    <div class="scroll_item">V</div>
                    <div class="scroll_item">W</div> 
                    <div class="scroll_item">X</div> 
                    <div class="scroll_item">Y</div>
                    <div class="scroll_item">Z</div> 
                </div>

            </div>





        </div> 

    </div>

    








    <div class="screen" id="screen_contact">



        <!-- HEADER -->
        <div class="screen_header">

            <div class="screen_contact_exit" onclick="CURRENT_CONTACT_OPEN_EDIT_INDEX=-1;toggleScreenSide('screen_contact', false)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                </svg>
            </div>

            <div id="editButton" onclick="openAddEditScreen()">EDITAR</div>

        </div>









        <!-- CONTENT -->
        <div class="screen_content">


            <!-- IMAGE -->
            <div class="screen_contact_image">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg>
            </div>



            <!-- NAME -->
            <div class="screen_contact_block_wrapper">

                <div id="screen_contact_name">Teste</div>
 
                <label id="screen_contact_favorite_label">
                    <input type="checkbox" id="screen_contact_favorite_checkbox">
                    <div id="screen_contact_favorite">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>
                    </div>
                </label>               

            </div>


            <!-- SUMMARY AND ACTION -->
            <div class="screen_contact_block_wrapper">

                <!-- SUB ITEM -->
                <div class="screen_contact_block_item">

                    <div class="screen_contact_block_item_content">
                        <div class="screen_contact_block_item_title">Celular</div>
                        <div class="screen_contact_block_item_subTitle" id="contact_screen_number">00912345678</div>
                    </div>

                    <div class="screen_contact_block_item_actions" id="action_caller">
                        <div class="screen_contact_block_item_action">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                            </svg>
                        </div>

                        <div class="screen_contact_block_item_action" id="action_message">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                            </svg>
                        </div>
                    </div>

                </div>

            </div>
             

        </div>


    </div>








    <div class="screen" id="screen_addEdit">

        <div class="screen_header">
            <div onclick="CURRENT_CONTACT_OPEN_EDIT_INDEX=-1;toggleScreenSide('screen_addEdit', false)">CANCELAR</div>
            <div id="addEdit_header_button_save" onclick="onClickAddEditSaveButton()">SALVAR</div>
        </div>


        <div class="screen_content">
            
            <!-- IMAGE -->
            <div id="addEdit_image">
                <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg>
            </div>


            <!-- INPUTs -->
            <input class="addEdit_input" type="text" spellcheck="false" placeholder="Nome" disabled>
            <input class="addEdit_input" type="tel" spellcheck="false" placeholder="Numero" disabled>
            <input class="addEdit_input" type="email" spellcheck="false" placeholder="E-mail" disabled>
            <input class="addEdit_input" type="text" spellcheck="false" placeholder="Empresa" disabled>
            <input class="addEdit_input" type="text" spellcheck="false" placeholder="Título de trabalho" disabled>
 

        </div>

    </div>







     








    <!-- MODAL DELETE -- class - modal_active -->
    <div class="modal" id="modal_delete">
        
        <div class="modal_container">

            <div class="modal_background" onclick="toggleModalScreen(this.parentNode.parentNode.id, false)"></div>

            <div class="modal_window">

                <div class="modal_content">Excluir o contato?</div>

                <div class="modal_actions">
                    <div></div>
                    <div class="modal_button" onclick="toggleModalScreen('modal_delete', false)">CANCELAR</div>
                    <div class="modal_button" onclick="onModalClickDetele()">APAGAR</div>
                </div>

            </div> 
        </div>

    </div>




    <!-- MODAL DELETE/REMOVE -- class - modal_active -->
    <div class="modal" id="modal_deleteRemoveFavorite">
        
        <div class="modal_container">

            <div class="modal_background" onclick="toggleModalScreen('modal_deleteRemoveFavorite', false)"></div>

            <div class="modal_window">

                <div class="modal_content">Excluir o contato ou removê-lo dos Favoritos?</div>

                <div class="modal_actions">
                    <div class="modal_button" onclick="toggleModalScreen('modal_deleteRemoveFavorite', false)">CANCELAR</div>
                    <div class="modal_button" onclick="removeFavoriteFromSelection()">REMOVER</div>
                    <div class="modal_button" onclick="onModalClickDetele()">APAGAR</div>
                </div>

            </div> 
        </div>

    </div>








    <!-- TOAST BAR -->
    <div id="toastWrapper">
        <div id="toast_content"></div>
    </div>


 
    
 


    <script>




        // MAIN HEADER
        var search_input        = document.getElementById("search_input");
        var search_exit         = document.getElementById("search_exit");
        var search_button       = document.getElementById("search_button");
        var search_placeholder  = document.getElementById("search_placeholder");

        // MAIN CONTENT
        var contact_list_main   = document.getElementById("contact_list_main");
        var contact_list_search = document.getElementById("contact_list_search");

        // SELECT ALL
        var checkbox_header_input = document.getElementById("checkbox_header_input");
        // DELETE SELECTED
        var delete_selected = document.getElementById("delete_selected");


        // ADD BUTTON
        var addButton_wrapper = document.getElementById("addButton_wrapper");
        // SCROLL TOP
        var scrollTopButton_wrapper = document.getElementById("scrollTopButton_wrapper");


        // SCROLL BODY
        var scroll_body = document.getElementById("scroll");
        // SCROLL LETTER
        var scroll_current_wrapper = document.getElementById("scroll_current_wrapper");
        // SCROLL THUMB
        var scroll_thumb = document.getElementById("scroll_thumb");


        // CONTACT SCREEN: FAVORITE CHECKBOX
        var screen_contact_favorite_checkbox = document.getElementById("screen_contact_favorite_checkbox");
        // EDIT BUTTON
        var editButton = document.getElementById("editButton");


        // ADD_EDIT INPUTs
        var addEdit_input = document.querySelectorAll(".addEdit_input");


        var CURRENT_CONTACT_OPEN_EDIT_INDEX = -1.



        var CONTATOS = [

            {
                "nome": "Marcos",
                "numero": "5802831682",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": false
            },

            {
                "nome": "Luiz melo",
                "numero": "9616970216",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": true
            },

            {
                "nome": "luiz alex",
                "numero": "5864483203",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": false
            },

            {
                "nome": "Alef",
                "numero": "1377911942",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": false
            },


            {
                "nome": "Thyago",
                "numero": "3797577058",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": true
            },

            {
                "nome": "Maria",
                "numero": "6463128544",
                "email": "email@domain.com",
                "empresa": "microsoft",
                "trabalho": "batata man",
                "favorito": true
            }
            

        ];








        Math.clamp = (value, min, max) => {
            if ( value < min ) return min;
            if ( value > max ) return max;
            return value;
        };









        // EVENT: INPUT -- search text
        search_input.oninput = () => {
            search_placeholder.classList.toggle("search_placeholder_visible", search_input.value.length == 0);
            search_button.style.visibility = (search_input.value.length == 0)? "hidden" : "visible";
            if ( search_input.value.length == 0 ){
                generateContactList([], true);
            }else{
                generateContactList(CONTATOS.filter(e => e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0), true);
            }
            
        };


        // EVENT: FOCUS -- open search mode
        search_input.onfocus = () => {
            console.log("open: search");
            search_exit.classList.add("search_mode");
            search_button.classList.add("search_icon_mode");
            toggleMainContentMode(1);
            search_button.style.visibility = (search_input.value.length == 0)? "hidden" : "visible";
            scroll_body.parentNode.classList.toggle("scrollWrapper_visible", false);
            addButton_wrapper.classList.remove("addButton_visible");
            addEdit_input.forEach(e => e.disabled = true );
        };


        // EVENT: CLICK -- exit search mode
        search_exit.onclick = () => {
            console.log("exit: search");
            search_button.style.visibility = "visible";
            search_input.value = '';
            search_placeholder.classList.add("search_placeholder_visible");
            search_exit.classList.remove("search_mode");
            search_button.classList.remove("search_icon_mode");
            scroll_body.parentNode.classList.toggle("scrollWrapper_visible", true);
            addButton_wrapper.classList.add("addButton_visible");
            toggleMainContentMode(0);
            generateContactList(CONTATOS);
        };


        // EVENT: CLICK -- search button
        search_button.onclick = () => {
            if ( search_button.classList.contains("search_icon_mode") ){
                console.log("search bar: clear");
                search_input.value = '';
                search_placeholder.classList.add("search_placeholder_visible");
                search_input.focus();
                generateContactList([], true);
            }else{
                console.log("search bar: options");
            }
        };


        // EVENT: CHANGE -- select all checkbox
        checkbox_header_input.onchange = () => {
            forceSelectionItem(checkbox_header_input.checked);
        };


        // EVENT: CLICK -- delete selected
        delete_selected.onclick = () => {
            console.log("deletar"); 
            toggleModalScreen((checkFavoriteIsChecked())?"modal_deleteRemoveFavorite" : "modal_delete", true);
        };


        // EVENT: LOAD -- html loaded
        window.onload = () => {
            generateContactList(CONTATOS);
        };


        // EVENT: CLICK -- scrolltop
        scrollTopButton_wrapper.onclick = () => {
            document.querySelectorAll(".contact_list").forEach(e => e.parentElement.scrollTo({behavior: "smooth", top: 0}) );
        };




        // EVENT: TOUCHMOVE, TOUCHSTART -- scroll thumb
        ['touchmove', 'touchstart'].forEach(e => {

            scroll_body.addEventListener(e, (evt)=>{
                let posY = evt.touches[0].clientY - scroll_thumb.offsetHeight - scroll_thumb.offsetHeight / 2;
                posY = Math.clamp(posY, 0, scroll_body.offsetHeight - scroll_thumb.offsetHeight - 10);
                let index = posY / ((scroll_body.offsetHeight - scroll_thumb.offsetHeight - 10)/(scroll_body.querySelectorAll('.scroll_item').length-1));
                index = Math.trunc(index);
                let currentChar = scroll_body.querySelectorAll('.scroll_item')[index].innerText;
                scroll_current_wrapper.innerHTML = currentChar;
                scroll_current_wrapper.style.display = 'flex';
                scroll_thumb.style.visibility = "visible";
                scroll_thumb.style.top = posY + 'px';
                scroll_current_wrapper.style.top = posY + 'px';
                addButton_wrapper.classList.remove("addButton_visible"); 

                if ( currentChar == "☆" && contact_list_main.querySelector(".contact_sorter_favorite") ){
                    contact_list_main.querySelector(".contact_sorter_favorite").scrollIntoView();
                }
                else{ 
                    let list = contact_list_main.querySelectorAll(".contact_sorter_group");
                    for (let i = 0; i < list.length; i++){
                        if ( list[i].querySelector(".contact_sorter_content").firstElementChild.innerText == currentChar ){ 
                            list[i].scrollIntoView();
                            break;
                        }
                    }
                } 

            });

        });

        
        
        // EVENT: TOUCHEND, TOUCHCANCEL -- scroll thumb release
        ['touchend', 'touchcancel'].forEach(e => {
            scroll_body.addEventListener(e, ()=>{
                scroll_current_wrapper.style.display = 'none'; 
                scroll_thumb.style.visibility = "hidden";
                addButton_wrapper.classList.add("addButton_visible");
            });
        });



        // EVENT: CHANGE -- favorite
        screen_contact_favorite_checkbox.onchange = () => {
            CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].favorito = screen_contact_favorite_checkbox.checked;
            if ( getMainContentMode() == 0 ){
                generateContactList(CONTATOS);
            }else{
                generateContactList(CONTATOS.filter(e => e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0), true);
            }
        };






        // EVENT: INPUT -- add_edit INPUTs
        addEdit_input.forEach((e, i) => {
            e.onkeydown = (evt) => {
                if ( evt.keyCode == 13 ){
                    e.value = e.value.trim();
                    if ( i < addEdit_input.length-1 ){
                        addEdit_input[i+1].focus();
                    }else{
                        e.blur();
                    }
                }
            };
        });

 

 

        // 0 -- search bar
        // 1 -- selection mode
        function toggleHeaderMode( index = 0 ){
            document.querySelectorAll("#screen_main .main_header_body").forEach((e, i) => {
                e.classList.toggle("main_header_body_active", index == i);
            });

            if ( getMainContentMode() == 0 ){
                addButton_wrapper.classList.toggle("addButton_visible", index==0);
            } 

        }


        // 0 -- main list
        // 1 -- by search list
        function toggleMainContentMode( index = 0 ){
            document.querySelectorAll("#screen_main .contact_list").forEach((e, i) => {
                e.classList.toggle("contact_list_active", index == i);
            });
            scroll_body.parentNode.classList.toggle("scrollWrapper_visible", index==0);
        }



        function getHeaderMode(){
            let el = document.querySelectorAll("#screen_main .main_header_body");
            for (let i = 0; i < el.length; i++) {
                if (el[i].classList.contains("main_header_body_active")){
                    return i;
                }
            }
            return -1;
        }


        function getMainContentMode(){
            let el = document.querySelectorAll("#screen_main .contact_list");
            for (let i = 0; i < el.length; i++) {
                if (el[i].classList.contains("contact_list_active")){
                    return i;
                }
            }
            return -1;
        }


        function getMainItemSelectedQty(){
            let el = document.querySelectorAll("#contact_list_main .contact_sorter_group:not(.contact_sorter_favorite) .contact_item_selected");
            return (el)? el.length : 0;
        }

        function getSearchItemSelectedQty(){
            let el = document.querySelectorAll("#contact_list_search .contact_item_selected");
            return (el)? el.length : 0;
        }


        function getListMainItemSelected(){
            let list = [];
            document.querySelectorAll("#contact_list_main .contact_sorter_group:not(.contact_sorter_favorite) .contact_item_selected").forEach(e => {
                list.push( Math.trunc(e.getAttribute("item-index")) );
            });
            return list.sort((a, b) => b - a );
        }

        function getListSearchItemSelected(){
            let list = [];
            document.querySelectorAll("#contact_list_search .contact_item_selected").forEach(e => {
                list.push( Math.trunc(e.getAttribute("item-index")) );
            });
            ;
            return list.sort((a, b) => b - a );
        }



        function deleteMainItemByIndexList(){
            getListMainItemSelected().forEach(e => CONTATOS.splice(e, 1));
            generateContactList(CONTATOS);
            toggleHeaderMode(0);
        }



        function deleteSearchItemByIndexList(){
            getListSearchItemSelected().forEach(e => CONTATOS.splice(e, 1)); 
            generateContactList(CONTATOS.filter(e => e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0), true);
            toggleHeaderMode(0);
        }



        function isAllItemMainSelected(){
            let el = document.querySelectorAll("#contact_list_main .contact_item_wrapper");
            for (let i = 0; i < el.length; i++){
                if ( !el[i].classList.contains("contact_item_selected") ){
                    return false;
                }
            }
            return true;
        }



        function isAllItemSearchSelected(){
            let el = document.querySelectorAll("#contact_list_search .contact_item_wrapper");
            for (let i = 0; i < el.length; i++){
                if ( !el[i].classList.contains("contact_item_selected") ){
                    return false;
                }
            }
            return true;
        }



        function checkFavoriteIsChecked(){
            return (document.querySelector(".contact_item_selected[item-favorite='true']"))? true : false;
        }



        function removeFavoriteFromSelection(){

            let el = document.querySelectorAll(".contact_item_selected[item-favorite='true']");
            let list = [];

            el.forEach(e => {
                let idx = Math.trunc( e.getAttribute("item-index") );
                if ( list.indexOf(idx) < 0 ){
                    list.push(idx);
                } 
            });

            list.sort((a, b) => b - a );
            list.forEach(e => CONTATOS[e].favorito = false);

            if ( getMainContentMode() == 0 ){
                generateContactList(CONTATOS);
                scroll_body.parentNode.classList.toggle("scrollWrapper_visible", true);
            }else{
                generateContactList(CONTATOS.filter(e => e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0), true);
            }

            toggleHeaderMode(0);
            toggleModalScreen("modal_delete", false);
            toggleModalScreen("modal_deleteRemoveFavorite", false);

        }
 

        
        function forceSelectionItem( state = false ){

            let mode = getMainContentMode();
             
            document.querySelectorAll("#contact_list_" + (mode==0? "main" : "search") + " .contact_item_wrapper").forEach(e => {
                e.classList.toggle("contact_item_selected", state);
            });
                
            document.getElementById("selected_count").innerHTML = (mode == 0)? getMainItemSelectedQty() : getSearchItemSelectedQty();
            
            if (!state){
                toggleHeaderMode(0);
                scroll_body.parentNode.classList.toggle("scrollWrapper_visible", getMainContentMode() == 0);
            }
            
        }


         


        function toggleSelectionByIndexAttribute( index, state ){

            document.querySelectorAll("#contact_list_main .contact_item_wrapper").forEach(e => {
                if ( e.getAttribute("item-index") == index ){
                    e.classList.toggle("contact_item_selected", state);
                }
            });
            checkbox_header_input.checked = isAllItemMainSelected();
        }



        function toggleSelectionByIndexElementSearch( index, state ){
            document.querySelectorAll("#contact_list_search .contact_item_wrapper")[index].classList.toggle("contact_item_selected", state);
            checkbox_header_input.checked = isAllItemSearchSelected();
        }








        function onModalClickDetele(){
            
            if ( getMainContentMode() == 0 ){
                deleteMainItemByIndexList();
                scroll_body.parentNode.classList.toggle("scrollWrapper_visible", true);
            }else{
                deleteSearchItemByIndexList();
            } 
            toggleModalScreen("modal_delete", false);
            toggleModalScreen("modal_deleteRemoveFavorite", false);

        }







        function toggleModalScreen(modalId, state){
 
            let modal = document.getElementById(modalId);

            if ( modalId == "modal_delete" ){
                document.getElementById("modal_delete").querySelector(".modal_content").innerHTML = (selected_count.innerHTML==1)? "Excluir o contato?" : (`Excluir ${selected_count.innerHTML} contatos?`);
            }else{
                document.getElementById("modal_deleteRemoveFavorite").querySelector(".modal_content").innerHTML = (selected_count.innerHTML==1)? "Excluir o contato ou removê-lo dos Favoritos?" : (`Excluir ${selected_count.innerHTML} contatos ou removê-los dos favoritos?`);
            }

            if (state){
                modal.style.display = 'block';
                setTimeout(()=>{
                    modal.classList.toggle("modal_active", true);
                }, 1);
            }else{
                modal.classList.toggle("modal_active", false);
                setTimeout(()=>{
                    modal.style.display = 'none';
                }, 200);
            } 

        }








 

        function toggleScreenSide(id,state){ 
            document.getElementById(id).style.left = (state)? 0 : '100%';
        }




        function openContactScreen(name, number, isFavorite){
            document.getElementById("screen_contact_name").innerHTML = name;
            document.getElementById("contact_screen_number").innerHTML = number;
            screen_contact_favorite_checkbox.checked = isFavorite;
            toggleScreenSide("screen_contact", true);
        }




        function openAddEditScreen(){

            let isAdd = CURRENT_CONTACT_OPEN_EDIT_INDEX < 0;
            addEdit_input[0].value = (isAdd)? '': CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].nome;
            addEdit_input[1].value = (isAdd)? '': CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].numero;
            addEdit_input[2].value = (isAdd)? '': CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].email;
            addEdit_input[3].value = (isAdd)? '': CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].empresa;
            addEdit_input[4].value = (isAdd)? '': CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].trabalho;

            addEdit_input.forEach(e => e.disabled = false );

            toggleScreenSide('screen_addEdit', true);
            toggleScreenSide('screen_contact', false);

        }






        function onClickAddEditSaveButton(){


            addEdit_input.forEach(e => e.value = e.value.trim() );
            let isAdd = CURRENT_CONTACT_OPEN_EDIT_INDEX < 0;

            if ( addEdit_input[0].value.length == 0 || addEdit_input[1].value.length == 0 ){
                console.log("void");
                setToastBarContent("Não há nada para salvar. O contato foi descartado.");
            }else{
                if ( isAdd ){ 
                    CONTATOS.push({
                        "nome": addEdit_input[0].value,
                        "numero": addEdit_input[1].value,
                        "email": addEdit_input[2].value,
                        "empresa": addEdit_input[3].value,
                        "trabalho": addEdit_input[4].value,
                        "favorito": false
                    }); 
                }else{
                    CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].nome      = addEdit_input[0].value;
                    CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].numero    = addEdit_input[1].value;
                    CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].email     = addEdit_input[2].value;
                    CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].empresa   = addEdit_input[3].value;
                    CONTATOS[CURRENT_CONTACT_OPEN_EDIT_INDEX].trabalho  = addEdit_input[4].value;
                }

                if ( getMainContentMode() == 0 ){
                    generateContactList(CONTATOS);
                }else{
                    generateContactList(CONTATOS.filter(e => e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0), true);
                }

            }


            CURRENT_CONTACT_OPEN_EDIT_INDEX=-1;
            toggleScreenSide("screen_addEdit", false);

        }


         






        function toggleToastBar(state){
            addButton.style.marginBottom = (state)? "90px" : "16px";
            document.getElementById("toastWrapper").classList.toggle("toast_visible", state);
        }


        function setToastBarContent( text ){
            document.getElementById("toast_content").innerHTML = text;
            toggleToastBar(true);
            setTimeout(toggleToastBar, 2500);
        }

 









        function sortMainArray(){
            CONTATOS.sort((a, b) => a.nome.toUpperCase().localeCompare(b.nome.toUpperCase()) );
        }


        

        function generateContactList( list = [], isSearch = false ){

            contact_list_main.innerHTML = '';
            contact_list_search.innerHTML = '';
            sortMainArray();

            let CONTATOS_FAVORITOS = list.filter(e => e.favorito);
            let CONTATOS_FAVORITOS_INDEX = list.map((e,i) => e.favorito ? i : undefined).filter(x => x >= 0);
            let CONTATOS_SEARCH_INDEX = [];

            if ( isSearch ){
                CONTATOS_SEARCH_INDEX = CONTATOS.map((e,i) => (e.nome.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0 || e.numero.toUpperCase().indexOf(search_input.value.toUpperCase()) >= 0) ? i : undefined).filter(x => x >= 0);
            }

            

            if ( CONTATOS_FAVORITOS.length > 0 && !isSearch ){
 

                let sorter = document.createElement("div");
                sorter.classList.add("contact_sorter_group");
                sorter.classList.add("contact_sorter_favorite");
            
                sorter.innerHTML = `
                <div class="contact_sorter_wrapper">
                    <div class="contact_sorter_content">
                        <div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16"><path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg></div>
                        <div>FAVORITOS</div>
                    </div>
                    <div></div>
                </div>
                <div class="contact_sorter_list"></div>`;

                contact_list_main.appendChild(sorter);

                CONTATOS_FAVORITOS.forEach((e, i) => {
                    let item = document.createElement("div");
                    item.classList.add("contact_item_wrapper");
                    item.setAttribute("item-index", CONTATOS_FAVORITOS_INDEX[i]);
                    item.setAttribute("item-favorite", true);
                    item.innerHTML = `
                    <div class="contact_item_image">
                        <div>${e.nome.charAt(0).toUpperCase()}</div>
                        <div><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/></svg></div>
                    </div>
                    <div class="contact_item_content">
                        <div class="contact_item_title">${e.nome}</div>
                    </div>`;
                    contact_list_main.querySelector(".contact_sorter_group:last-child").appendChild(item);
                });

            }




            let tempScrollLetterList = scroll_body.querySelectorAll(".scroll_item");

            tempScrollLetterList.forEach(e => {
                e.style.color = "#c2c2c2";
            });
            


            let letter = '';

            list.forEach((e, i) => {

                let tempLetter = e.nome.charAt(0).toUpperCase();
                let itemLetter = tempLetter;

                if ( (tempLetter.charCodeAt(0) >= 33 && tempLetter.charCodeAt(0) <= 64) || (tempLetter.charCodeAt(0) >= 91 && tempLetter.charCodeAt(0) <= 126) ){
                    tempLetter = "&"; 
                } 

                

                if ( tempLetter != letter ){ 
                    letter = tempLetter; 
                    
                    for (let j = 1; j < tempScrollLetterList.length; j++){
                        if ( (tempScrollLetterList[j].innerText == itemLetter) || ( tempScrollLetterList[j].innerText == "&" && (itemLetter.charCodeAt(0) >= 33 && itemLetter.charCodeAt(0) <= 64) || (itemLetter.charCodeAt(0) >= 91 && itemLetter.charCodeAt(0) <= 126)) ){
                            tempScrollLetterList[j].style.color = "#f79743";
                            break;
                        } 
                    } 

                    if ( !isSearch ){
                        let sorter = document.createElement("div");
                        sorter.classList.add("contact_sorter_group");
                        sorter.innerHTML = `
                        <div class="contact_sorter_wrapper">
                            <div class="contact_sorter_content"><div>${letter}</div></div>
                            <div></div>
                        </div>
                        <div class="contact_sorter_list"></div>`;
                        contact_list_main.appendChild(sorter);
                    }
                }

                let item = document.createElement("div");
                item.setAttribute("item-index", ((isSearch)? CONTATOS_SEARCH_INDEX[i] : i));
                item.setAttribute("item-favorite", e.favorito);
                item.classList.add("contact_item_wrapper");

                item.innerHTML = `
                <div class="contact_item_image">
                    <div>${itemLetter}</div>
                    <div><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16"><path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/></svg></div>
                </div>
                
                <div class="contact_item_content">
                    <div class="contact_item_title">${e.nome}</div>
                    ${(isSearch)? `<div class="contact_item_subTitle">${e.numero}</div>` : ''}
                </div>`;
                

                if ( isSearch ){
                    contact_list_search.appendChild(item);
                }else{
                    contact_list_main.querySelector(".contact_sorter_group:last-child").appendChild(item);
                }

            });



            scroll_body.querySelector(".scroll_item").style.color = (CONTATOS_FAVORITOS.length > 0)? "#f79743" : "#c2c2c2";

            var PRESS_TIMER = null;
            let clientX;
            let clientY;

            document.querySelectorAll(".contact_list").forEach(e => {
                e.parentNode.onscroll = () => { 
                    clearTimeout(PRESS_TIMER);
                    PRESS_TIMER = null;
                    scrollTopButton_wrapper.classList.toggle("scrollTopButton_visible", e.parentNode.scrollTop>0);
                };
            });
            
            
            document.querySelectorAll(".contact_item_wrapper").forEach((e, i) => {
                
                // TOUCH DOWN -- LONG
                e.ontouchstart = (evt) => {
                    clientX = evt.touches[0].clientX;
                    clientY = evt.touches[0].clientY;
                    if ( !PRESS_TIMER ){
                        PRESS_TIMER = setTimeout(()=>{
                            PRESS_TIMER = null;
                            console.log("long press");
                            if ( getHeaderMode() == 0 ){
                                scroll_body.parentNode.classList.toggle("scrollWrapper_visible", false);
                                navigator.vibrate(50);
                                toggleHeaderMode(1);
                                if ( getMainContentMode() == 0 ){
                                    toggleSelectionByIndexAttribute(e.getAttribute("item-index"), true); 
                                }else{
                                    console.log("long press: searched item");
                                    toggleSelectionByIndexElementSearch(i, true);
                                }
                                document.getElementById("selected_count").innerHTML = (getMainContentMode() == 0)? getMainItemSelectedQty() : getSearchItemSelectedQty();
                            }
                        }, 800);
                    }
                };

                // TOUCH UP -- CLICK
                e.ontouchend = (evt) => {
                    if (evt.cancelable) evt.preventDefault();
                    if ( PRESS_TIMER ){
                        if ( getHeaderMode() == 0 ){ 
                           console.log("open contact");
                           let idx = Math.trunc(e.getAttribute("item-index"));
                           CURRENT_CONTACT_OPEN_EDIT_INDEX = idx;
                           search_input.blur();
                           openContactScreen(CONTATOS[idx].nome, CONTATOS[idx].numero, CONTATOS[idx].favorito);

                        }else{
                            console.log("select contact");
                            if ( getMainContentMode() == 0 ){
                                toggleSelectionByIndexAttribute(e.getAttribute("item-index")); 
                            }else{
                                console.log("click: searched item");
                                toggleSelectionByIndexElementSearch(i);
                            }
                            
                            if ( ((getMainContentMode() == 0)? getMainItemSelectedQty() : getSearchItemSelectedQty()) == 0 ){
                                toggleHeaderMode(0);
                                scroll_body.parentNode.classList.toggle("scrollWrapper_visible", getMainContentMode() == 0);
                            }
                            document.getElementById("selected_count").innerHTML = (getMainContentMode() == 0)? getMainItemSelectedQty() : getSearchItemSelectedQty();
                             
                        }
                    }
                    clearTimeout(PRESS_TIMER);
                    PRESS_TIMER = null;
                    return true;
                };

                // TOUCH MOVE
                e.ontouchmove = (evt) => {
                    let threshold = Math.hypot(evt.changedTouches[0].clientX - clientX, evt.changedTouches[0].clientY - clientY);
                    if ( threshold >= 10 ){
                        clearTimeout(PRESS_TIMER);
                        PRESS_TIMER = null;
                    }
                };

            });
        }
 




    </script>


</body>
</html>